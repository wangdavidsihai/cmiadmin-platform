{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-4f6e\",\"chunk-1d91\",\"chunk-7312\",\"chunk-b4f51\"],{\"/2n5\":function(e,t,o){\"use strict\";o.d(t,\"a\",function(){return a}),o.d(t,\"b\",function(){return s}),o.d(t,\"c\",function(){return n}),o.d(t,\"e\",function(){return r}),o.d(t,\"d\",function(){return l});var i=o(\"t3Un\");function a(e){return Object(i.a)({url:\"api/jobs\",method:\"post\",data:e})}function s(e){return Object(i.a)({url:\"api/jobs/\"+e,method:\"delete\"})}function n(e){return Object(i.a)({url:\"api/jobs\",method:\"put\",data:e})}function r(e){return Object(i.a)({url:\"api/jobs/\"+e,method:\"put\"})}function l(e){return Object(i.a)({url:\"api/jobs/exec/\"+e,method:\"put\"})}},\"2jya\":function(e,t,o){\"use strict\";o.r(t);var i={components:{eForm:o(\"46pm\").default},props:{data:{type:Object,required:!0},sup_this:{type:Object,required:!0}},methods:{to:function(){var e=this.$refs.form;e.form={id:this.data.id,jobName:this.data.jobName,beanName:this.data.beanName,methodName:this.data.methodName,params:this.data.params,cronExpression:this.data.cronExpression,isPause:this.data.isPause.toString(),remark:this.data.remark},e.dialog=!0}}},a=(o(\"H1K4\"),o(\"KHd+\")),s=Object(a.a)(i,function(){var e=this.$createElement,t=this._self._c||e;return t(\"div\",[t(\"el-button\",{attrs:{size:\"mini\",type:\"text\"},on:{click:this.to}},[this._v(\"编辑\")]),this._v(\" \"),t(\"eForm\",{ref:\"form\",attrs:{sup_this:this.sup_this,\"is-add\":!1}})],1)},[],!1,null,\"7bc57dd0\",null);s.options.__file=\"edit.vue\";t.default=s.exports},\"2r8K\":function(e,t,o){},\"46pm\":function(e,t,o){\"use strict\";o.r(t);var i=o(\"/2n5\"),a={props:{isAdd:{type:Boolean,required:!0},sup_this:{type:Object,default:null}},data:function(){return{loading:!1,dialog:!1,form:{jobName:\"\",beanName:\"\",methodName:\"\",params:\"\",cronExpression:\"\",isPause:\"false\",remark:\"\"},permissionIds:[],rules:{jobName:[{required:!0,message:\"请输入任务名称\",trigger:\"blur\"}],beanName:[{required:!0,message:\"请输入Bean名称\",trigger:\"blur\"}],methodName:[{required:!0,message:\"请输入方法名称\",trigger:\"blur\"}],cronExpression:[{required:!0,message:\"请输入Cron表达式\",trigger:\"blur\"}]}}},methods:{cancel:function(){this.resetForm()},doSubmit:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;e.loading=!0,e.isAdd?e.doAdd():e.doEdit()})},doAdd:function(){var e=this;Object(i.a)(this.form).then(function(t){e.resetForm(),e.$notify({title:\"添加成功\",type:\"success\",duration:2500}),e.loading=!1,e.$parent.$parent.init()}).catch(function(t){e.loading=!1,console.log(t.response.data.message)})},doEdit:function(){var e=this;Object(i.c)(this.form).then(function(t){e.resetForm(),e.$notify({title:\"修改成功\",type:\"success\",duration:2500}),e.loading=!1,e.sup_this.init()}).catch(function(t){e.loading=!1,console.log(t.response.data.message)})},resetForm:function(){this.dialog=!1,this.$refs.form.resetFields(),this.form={jobName:\"\",beanName:\"\",methodName:\"\",params:\"\",cronExpression:\"\",isPause:\"false\",remark:\"\"}}}},s=(o(\"ajnt\"),o(\"KHd+\")),n=Object(s.a)(a,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"el-dialog\",{attrs:{\"append-to-body\":!0,visible:e.dialog,title:e.isAdd?\"新增任务\":\"编辑任务\",width:\"600px\"},on:{\"update:visible\":function(t){e.dialog=t}}},[o(\"el-form\",{ref:\"form\",attrs:{model:e.form,rules:e.rules,size:\"small\",\"label-width\":\"100px\"}},[o(\"el-form-item\",{attrs:{label:\"任务名称\",prop:\"jobName\"}},[o(\"el-input\",{staticStyle:{width:\"460px\"},model:{value:e.form.jobName,callback:function(t){e.$set(e.form,\"jobName\",t)},expression:\"form.jobName\"}})],1),e._v(\" \"),o(\"el-form-item\",{attrs:{label:\"Bean名称\",prop:\"beanName\"}},[o(\"el-input\",{staticStyle:{width:\"460px\"},model:{value:e.form.beanName,callback:function(t){e.$set(e.form,\"beanName\",t)},expression:\"form.beanName\"}})],1),e._v(\" \"),o(\"el-form-item\",{attrs:{label:\"执行方法\",prop:\"methodName\"}},[o(\"el-input\",{staticStyle:{width:\"460px\"},model:{value:e.form.methodName,callback:function(t){e.$set(e.form,\"methodName\",t)},expression:\"form.methodName\"}})],1),e._v(\" \"),o(\"el-form-item\",{attrs:{label:\"参数内容\"}},[o(\"el-input\",{staticStyle:{width:\"460px\"},model:{value:e.form.params,callback:function(t){e.$set(e.form,\"params\",t)},expression:\"form.params\"}})],1),e._v(\" \"),o(\"el-form-item\",{attrs:{label:\"Cron表达式\",prop:\"cronExpression\"}},[o(\"el-input\",{staticStyle:{width:\"460px\"},model:{value:e.form.cronExpression,callback:function(t){e.$set(e.form,\"cronExpression\",t)},expression:\"form.cronExpression\"}})],1),e._v(\" \"),o(\"el-form-item\",{attrs:{label:\"任务状态\"}},[o(\"el-radio\",{attrs:{label:\"false\"},model:{value:e.form.isPause,callback:function(t){e.$set(e.form,\"isPause\",t)},expression:\"form.isPause\"}},[e._v(\"启用\")]),e._v(\" \"),o(\"el-radio\",{attrs:{label:\"true\"},model:{value:e.form.isPause,callback:function(t){e.$set(e.form,\"isPause\",t)},expression:\"form.isPause\"}},[e._v(\"暂停\")])],1),e._v(\" \"),o(\"el-form-item\",{attrs:{label:\"任务描述\"}},[o(\"el-input\",{staticStyle:{width:\"460px\"},attrs:{rows:\"2\",type:\"textarea\"},model:{value:e.form.remark,callback:function(t){e.$set(e.form,\"remark\",t)},expression:\"form.remark\"}})],1)],1),e._v(\" \"),o(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[o(\"el-button\",{attrs:{type:\"text\"},on:{click:e.cancel}},[e._v(\"取消\")]),e._v(\" \"),o(\"el-button\",{attrs:{loading:e.loading,type:\"primary\"},on:{click:e.doSubmit}},[e._v(\"确认\")])],1)],1)},[],!1,null,\"78619c99\",null);n.options.__file=\"form.vue\";t.default=n.exports},H1K4:function(e,t,o){\"use strict\";var i=o(\"fNsn\");o.n(i).a},Iabt:function(e,t,o){\"use strict\";var i=o(\"Vc09\");o.n(i).a},Vc09:function(e,t,o){},ajnt:function(e,t,o){\"use strict\";var i=o(\"2r8K\");o.n(i).a},fNsn:function(e,t,o){},qSIJ:function(e,t,o){\"use strict\";o.r(t);var i=o(\"41Be\"),a=o(\"46pm\"),s=o(\"3Dis\"),n={components:{eForm:a.default,Log:s.default},props:{query:{type:Object,required:!0}},data:function(){return{downloadLoading:!1}},methods:{checkPermission:i.a,toQuery:function(){this.$parent.page=0,this.$parent.init()},doLog:function(){this.$refs.log.dialog=!0,this.$refs.log.doInit()}}},r=o(\"KHd+\"),l=Object(r.a)(n,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"div\",{staticClass:\"head-container\"},[o(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"200px\"},attrs:{clearable:\"\",placeholder:\"输入任务名称搜索\"},nativeOn:{keyup:function(t){return\"button\"in t||!e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?e.toQuery(t):null}},model:{value:e.query.value,callback:function(t){e.$set(e.query,\"value\",t)},expression:\"query.value\"}}),e._v(\" \"),o(\"el-button\",{staticClass:\"filter-item\",attrs:{size:\"mini\",type:\"primary\",icon:\"el-icon-search\"},on:{click:e.toQuery}},[e._v(\"搜索\")]),e._v(\" \"),o(\"div\",{staticStyle:{display:\"inline-block\",margin:\"0px 2px\"}},[e.checkPermission([\"ADMIN\",\"JOB_ALL\",\"JOB_CREATE\"])?o(\"el-button\",{staticClass:\"filter-item\",attrs:{size:\"mini\",type:\"primary\",icon:\"el-icon-plus\"},on:{click:function(t){e.$refs.form.dialog=!0}}},[e._v(\"新增\")]):e._e(),e._v(\" \"),o(\"eForm\",{ref:\"form\",attrs:{\"is-add\":!0}})],1),e._v(\" \"),o(\"div\",{staticStyle:{display:\"inline-block\",margin:\"0px 2px\"}},[o(\"el-button\",{staticClass:\"filter-item\",attrs:{size:\"mini\",type:\"warning\",icon:\"el-icon-tickets\"},on:{click:e.doLog}},[e._v(\"执行日志\")]),e._v(\" \"),o(\"Log\",{ref:\"log\"})],1)],1)},[],!1,null,null,null);l.options.__file=\"header.vue\";t.default=l.exports},t4rL:function(e,t,o){\"use strict\";o.r(t);var i=o(\"41Be\"),a=o(\"3ADX\"),s=o(\"/2n5\"),n=o(\"7Qib\"),r=o(\"qSIJ\"),l=o(\"2jya\"),c={components:{eHeader:r.default,edit:l.default},mixins:[a.a],data:function(){return{delLoading:!1,sup_this:this}},created:function(){var e=this;this.$nextTick(function(){e.init()})},methods:{parseTime:n.c,checkPermission:i.a,beforeInit:function(){this.url=\"api/jobs\";var e=this.query.value;return this.params={page:this.page,size:this.size,sort:\"id,desc\"},e&&(this.params.jobName=e),!0},execute:function(e){var t=this;Object(s.d)(e).then(function(e){t.$notify({title:\"执行成功\",type:\"success\",duration:2500})}).catch(function(e){console.log(e.response.data.message)})},updateStatus:function(e,t){var o=this;Object(s.e)(e).then(function(e){o.init(),o.$notify({title:t+\"成功\",type:\"success\",duration:2500})}).catch(function(e){console.log(e.response.data.message)})},subDelete:function(e){var t=this;this.delLoading=!0,Object(s.b)(e).then(function(o){t.delLoading=!1,t.$refs[e].doClose(),t.init(),t.$notify({title:\"删除成功\",type:\"success\",duration:2500})}).catch(function(o){t.delLoading=!1,t.$refs[e].doClose(),console.log(o.response.data.message)})}}},u=(o(\"Iabt\"),o(\"KHd+\")),d=Object(u.a)(c,function(){var e=this,t=e.$createElement,o=e._self._c||t;return o(\"div\",{staticClass:\"app-container\"},[o(\"eHeader\",{attrs:{query:e.query}}),e._v(\" \"),o(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.loading,expression:\"loading\"}],staticStyle:{width:\"100%\"},attrs:{data:e.data,size:\"small\",border:\"\"}},[o(\"el-table-column\",{attrs:{\"show-overflow-tooltip\":!0,prop:\"jobName\",width:\"100px\",label:\"任务名称\"}}),e._v(\" \"),o(\"el-table-column\",{attrs:{\"show-overflow-tooltip\":!0,prop:\"beanName\",label:\"Bean名称\"}}),e._v(\" \"),o(\"el-table-column\",{attrs:{\"show-overflow-tooltip\":!0,prop:\"methodName\",width:\"90px\",label:\"执行方法\"}}),e._v(\" \"),o(\"el-table-column\",{attrs:{\"show-overflow-tooltip\":!0,prop:\"params\",width:\"80px\",label:\"参数\"}}),e._v(\" \"),o(\"el-table-column\",{attrs:{\"show-overflow-tooltip\":!0,prop:\"cronExpression\",width:\"100px\",label:\"cron表达式\"}}),e._v(\" \"),o(\"el-table-column\",{attrs:{\"show-overflow-tooltip\":!0,prop:\"isPause\",width:\"90px\",label:\"状态\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[o(\"el-tag\",{attrs:{type:t.row.isPause?\"warning\":\"success\"}},[e._v(e._s(t.row.isPause?\"已暂停\":\"运行中\"))])]}}])}),e._v(\" \"),o(\"el-table-column\",{attrs:{\"show-overflow-tooltip\":!0,prop:\"remark\",label:\"描述\"}}),e._v(\" \"),o(\"el-table-column\",{attrs:{\"show-overflow-tooltip\":!0,prop:\"updateTime\",label:\"更新日期\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[o(\"span\",[e._v(e._s(e.parseTime(t.row.updateTime)))])]}}])}),e._v(\" \"),o(\"el-table-column\",{attrs:{label:\"操作\",width:\"180px\",align:\"center\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[e.checkPermission([\"ADMIN\",\"JOB_ALL\",\"JOB_EDIT\"])?o(\"edit\",{attrs:{data:t.row,sup_this:e.sup_this}}):e._e(),e._v(\" \"),e.checkPermission([\"ADMIN\",\"JOB_ALL\",\"JOB_EDIT\"])?o(\"el-button\",{staticStyle:{\"margin-left\":\"-2px\"},attrs:{type:\"text\",size:\"mini\"},on:{click:function(o){e.execute(t.row.id)}}},[e._v(\"执行\")]):e._e(),e._v(\" \"),e.checkPermission([\"ADMIN\",\"JOB_ALL\",\"JOB_EDIT\"])?o(\"el-button\",{staticStyle:{\"margin-left\":\"3px\"},attrs:{type:\"text\",size:\"mini\"},on:{click:function(o){e.updateStatus(t.row.id,t.row.isPause?\"恢复\":\"暂停\")}}},[e._v(\"\\n          \"+e._s(t.row.isPause?\"恢复\":\"暂停\")+\"\\n        \")]):e._e(),e._v(\" \"),e.checkPermission([\"ADMIN\",\"JOB_ALL\",\"JOB_DELETE\"])?o(\"el-popover\",{ref:t.row.id,attrs:{placement:\"top\",width:\"200\"}},[o(\"p\",[e._v(\"确定停止并删除该任务吗？\")]),e._v(\" \"),o(\"div\",{staticStyle:{\"text-align\":\"right\",margin:\"0\"}},[o(\"el-button\",{attrs:{size:\"mini\",type:\"text\"},on:{click:function(o){e.$refs[t.row.id].doClose()}}},[e._v(\"取消\")]),e._v(\" \"),o(\"el-button\",{attrs:{loading:e.delLoading,type:\"primary\",size:\"mini\"},on:{click:function(o){e.subDelete(t.row.id)}}},[e._v(\"确定\")])],1),e._v(\" \"),o(\"el-button\",{attrs:{slot:\"reference\",type:\"text\",size:\"mini\"},slot:\"reference\"},[e._v(\"删除\")])],1):e._e()]}}])})],1),e._v(\" \"),o(\"el-pagination\",{staticStyle:{\"margin-top\":\"8px\"},attrs:{total:e.total,layout:\"total, prev, pager, next, sizes\"},on:{\"size-change\":e.sizeChange,\"current-change\":e.pageChange}})],1)},[],!1,null,\"50ea66e3\",null);d.options.__file=\"index.vue\";t.default=d.exports}}]);","extractedComments":[]}
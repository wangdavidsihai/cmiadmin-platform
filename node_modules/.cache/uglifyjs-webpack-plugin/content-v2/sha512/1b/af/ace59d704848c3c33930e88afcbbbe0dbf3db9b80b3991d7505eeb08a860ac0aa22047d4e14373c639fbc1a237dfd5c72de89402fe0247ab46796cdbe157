{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[\"chunk-2b66\"],{\"0ItM\":function(t,e,n){\"use strict\";var i=n(\"4STY\");n.n(i).a},\"4STY\":function(t,e,n){},Gedb:function(t,e,n){\"use strict\";function i(t){function e(t,e){return t<<e|t>>>32-e}function n(t,e){var n,i,r,o,a;return r=2147483648&t,o=2147483648&e,a=(1073741823&t)+(1073741823&e),(n=1073741824&t)&(i=1073741824&e)?2147483648^a^r^o:n|i?1073741824&a?3221225472^a^r^o:1073741824^a^r^o:a^r^o}function i(t,i,r,o,a,s,u){return n(e(t=n(t,n(n(function(t,e,n){return t&e|~t&n}(i,r,o),a),u)),s),i)}function r(t,i,r,o,a,s,u){return n(e(t=n(t,n(n(function(t,e,n){return t&n|e&~n}(i,r,o),a),u)),s),i)}function o(t,i,r,o,a,s,u){return n(e(t=n(t,n(n(function(t,e,n){return t^e^n}(i,r,o),a),u)),s),i)}function a(t,i,r,o,a,s,u){return n(e(t=n(t,n(n(function(t,e,n){return e^(t|~n)}(i,r,o),a),u)),s),i)}function s(t){var e,n=\"\",i=\"\";for(e=0;e<=3;e++)n+=(i=\"0\"+(t>>>8*e&255).toString(16)).substr(i.length-2,2);return n}var u,l,c,d,f,m,p,b,h,v;for(u=function(t){for(var e,n=t.length,i=n+8,r=16*((i-i%64)/64+1),o=Array(r-1),a=0,s=0;s<n;)a=s%4*8,o[e=(s-s%4)/4]=o[e]|t.charCodeAt(s)<<a,s++;return a=s%4*8,o[e=(s-s%4)/4]=o[e]|128<<a,o[r-2]=n<<3,o[r-1]=n>>>29,o}(t),p=1732584193,b=4023233417,h=2562383102,v=271733878,l=0;l<u.length;l+=16)c=p,d=b,f=h,m=v,b=a(b=a(b=a(b=a(b=o(b=o(b=o(b=o(b=r(b=r(b=r(b=r(b=i(b=i(b=i(b=i(b,h=i(h,v=i(v,p=i(p,b,h,v,u[l+0],7,3614090360),b,h,u[l+1],12,3905402710),p,b,u[l+2],17,606105819),v,p,u[l+3],22,3250441966),h=i(h,v=i(v,p=i(p,b,h,v,u[l+4],7,4118548399),b,h,u[l+5],12,1200080426),p,b,u[l+6],17,2821735955),v,p,u[l+7],22,4249261313),h=i(h,v=i(v,p=i(p,b,h,v,u[l+8],7,1770035416),b,h,u[l+9],12,2336552879),p,b,u[l+10],17,4294925233),v,p,u[l+11],22,2304563134),h=i(h,v=i(v,p=i(p,b,h,v,u[l+12],7,1804603682),b,h,u[l+13],12,4254626195),p,b,u[l+14],17,2792965006),v,p,u[l+15],22,1236535329),h=r(h,v=r(v,p=r(p,b,h,v,u[l+1],5,4129170786),b,h,u[l+6],9,3225465664),p,b,u[l+11],14,643717713),v,p,u[l+0],20,3921069994),h=r(h,v=r(v,p=r(p,b,h,v,u[l+5],5,3593408605),b,h,u[l+10],9,38016083),p,b,u[l+15],14,3634488961),v,p,u[l+4],20,3889429448),h=r(h,v=r(v,p=r(p,b,h,v,u[l+9],5,568446438),b,h,u[l+14],9,3275163606),p,b,u[l+3],14,4107603335),v,p,u[l+8],20,1163531501),h=r(h,v=r(v,p=r(p,b,h,v,u[l+13],5,2850285829),b,h,u[l+2],9,4243563512),p,b,u[l+7],14,1735328473),v,p,u[l+12],20,2368359562),h=o(h,v=o(v,p=o(p,b,h,v,u[l+5],4,4294588738),b,h,u[l+8],11,2272392833),p,b,u[l+11],16,1839030562),v,p,u[l+14],23,4259657740),h=o(h,v=o(v,p=o(p,b,h,v,u[l+1],4,2763975236),b,h,u[l+4],11,1272893353),p,b,u[l+7],16,4139469664),v,p,u[l+10],23,3200236656),h=o(h,v=o(v,p=o(p,b,h,v,u[l+13],4,681279174),b,h,u[l+0],11,3936430074),p,b,u[l+3],16,3572445317),v,p,u[l+6],23,76029189),h=o(h,v=o(v,p=o(p,b,h,v,u[l+9],4,3654602809),b,h,u[l+12],11,3873151461),p,b,u[l+15],16,530742520),v,p,u[l+2],23,3299628645),h=a(h,v=a(v,p=a(p,b,h,v,u[l+0],6,4096336452),b,h,u[l+7],10,1126891415),p,b,u[l+14],15,2878612391),v,p,u[l+5],21,4237533241),h=a(h,v=a(v,p=a(p,b,h,v,u[l+12],6,1700485571),b,h,u[l+3],10,2399980690),p,b,u[l+10],15,4293915773),v,p,u[l+1],21,2240044497),h=a(h,v=a(v,p=a(p,b,h,v,u[l+8],6,1873313359),b,h,u[l+15],10,4264355552),p,b,u[l+6],15,2734768916),v,p,u[l+13],21,1309151649),h=a(h,v=a(v,p=a(p,b,h,v,u[l+4],6,4149444226),b,h,u[l+11],10,3174756917),p,b,u[l+2],15,718787259),v,p,u[l+9],21,3951481745),p=n(p,c),b=n(b,d),h=n(h,f),v=n(v,m);return(s(p)+s(b)+s(h)+s(v)).toLowerCase()}n.d(e,\"a\",function(){return i})},Yfch:function(t,e,n){\"use strict\";function i(t){return/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/.test(t)}n.d(e,\"a\",function(){return i})},q4Ke:function(t,e,n){\"use strict\";n.r(e);var i=n(\"Q2AE\"),r=n(\"Gedb\"),o=n(\"Yfch\"),a=n(\"wk8/\"),s=n(\"t3Un\");var u={props:{email:{type:String,required:!0}},data:function(){var t=this;return{loading:!1,dialog:!1,title:\"修改邮箱\",form:{pass:\"\",email:\"\",code:\"\"},user:{email:\"\",password:\"\"},codeLoading:!1,codeData:{type:\"email\",value:\"\"},buttonName:\"获取验证码\",isDisabled:!1,time:60,rules:{pass:[{required:!0,validator:function(t,e,n){Object(a.f)(Object(r.a)(e)).then(function(t){200===t.status?n():n(new Error(\"密码错误，请重新输入\"))})},trigger:\"blur\"}],email:[{required:!0,validator:function(e,n,i){\"\"===n?i(new Error(\"新邮箱不能为空\")):n===t.email?i(new Error(\"新邮箱不能与旧邮箱相同\")):Object(o.a)(n)?i():i(new Error(\"邮箱格式错误\"))},trigger:\"blur\"}],code:[{required:!0,message:\"验证码不能为空\",trigger:\"blur\"}]}}},methods:{cancel:function(){this.resetForm()},sendCode:function(){var t=this;if(this.form.email&&this.form.email!==this.email){this.codeLoading=!0,this.buttonName=\"验证码发送中\",this.codeData.value=this.form.email;var e=this;(function(t){return Object(s.a)({url:\"api/code/resetEmail\",method:\"post\",data:t})})(this.codeData).then(function(n){t.$message({showClose:!0,message:\"发送成功，验证码有效期5分钟\",type:\"success\"}),t.codeLoading=!1,t.isDisabled=!0,t.buttonName=t.time--+\"秒后重新发送\",t.timer=window.setInterval(function(){e.buttonName=e.time+\"秒后重新发送\",--e.time,e.time<0&&(e.buttonName=\"重新发送\",e.time=60,e.isDisabled=!1,window.clearInterval(e.timer))},1e3)}).catch(function(e){t.resetForm(),t.codeLoading=!1,console.log(e.response.data.message)})}},doSubmit:function(){var t=this;this.$refs.form.validate(function(e){if(!e)return!1;t.loading=!0,t.user={email:t.form.email,password:Object(r.a)(t.form.pass)},Object(a.d)(t.form.code,t.user).then(function(e){t.loading=!1,t.resetForm(),t.$notify({title:\"邮箱修改成功\",type:\"success\",duration:1500}),i.a.dispatch(\"GetInfo\").then(function(){})}).catch(function(e){t.loading=!1,console.log(e.response.data.message)})})},resetForm:function(){this.dialog=!1,this.$refs.form.resetFields(),window.clearInterval(this.timer),this.time=60,this.buttonName=\"获取验证码\",this.isDisabled=!1,this.form={pass:\"\",email:\"\",code:\"\"}}}},l=(n(\"0ItM\"),n(\"KHd+\")),c=Object(l.a)(u,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(\"div\",{staticStyle:{display:\"inline-block\"}},[n(\"el-button\",{staticClass:\"button\",attrs:{size:\"mini\",type:\"info\"},on:{click:function(e){t.dialog=!0}}},[t._v(\"修改\")]),t._v(\" \"),n(\"el-dialog\",{attrs:{visible:t.dialog,title:t.title,width:\"475px\"},on:{\"update:visible\":function(e){t.dialog=e},close:t.cancel}},[n(\"el-form\",{ref:\"form\",attrs:{model:t.form,rules:t.rules,size:\"small\",\"label-width\":\"88px\"}},[n(\"el-form-item\",{attrs:{label:\"新邮箱\",prop:\"email\"}},[n(\"el-input\",{staticStyle:{width:\"200px\"},attrs:{\"auto-complete\":\"on\"},model:{value:t.form.email,callback:function(e){t.$set(t.form,\"email\",e)},expression:\"form.email\"}}),t._v(\" \"),n(\"el-button\",{attrs:{loading:t.codeLoading,disabled:t.isDisabled,size:\"small\"},on:{click:t.sendCode}},[t._v(t._s(t.buttonName))])],1),t._v(\" \"),n(\"el-form-item\",{attrs:{label:\"验证码\",prop:\"code\"}},[n(\"el-input\",{staticStyle:{width:\"320px\"},model:{value:t.form.code,callback:function(e){t.$set(t.form,\"code\",e)},expression:\"form.code\"}})],1),t._v(\" \"),n(\"el-form-item\",{attrs:{label:\"当前密码\",prop:\"pass\"}},[n(\"el-input\",{staticStyle:{width:\"320px\"},attrs:{type:\"password\"},model:{value:t.form.pass,callback:function(e){t.$set(t.form,\"pass\",e)},expression:\"form.pass\"}})],1)],1),t._v(\" \"),n(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[n(\"el-button\",{attrs:{type:\"text\"},on:{click:t.cancel}},[t._v(\"取消\")]),t._v(\" \"),n(\"el-button\",{attrs:{loading:t.loading,type:\"primary\"},on:{click:t.doSubmit}},[t._v(\"确认\")])],1)],1)],1)},[],!1,null,\"50e91ee9\",null);c.options.__file=\"updateEmail.vue\";e.default=c.exports},\"wk8/\":function(t,e,n){\"use strict\";n.d(e,\"a\",function(){return r}),n.d(e,\"b\",function(){return o}),n.d(e,\"c\",function(){return a}),n.d(e,\"f\",function(){return s}),n.d(e,\"e\",function(){return u}),n.d(e,\"d\",function(){return l});var i=n(\"t3Un\");function r(t){return Object(i.a)({url:\"api/users\",method:\"post\",data:t})}function o(t){return Object(i.a)({url:\"api/users/\"+t,method:\"delete\"})}function a(t){return Object(i.a)({url:\"api/users\",method:\"put\",data:t})}function s(t){return Object(i.a)({url:\"api/users/validPass/\"+t,method:\"get\"})}function u(t){return Object(i.a)({url:\"api/users/updatePass/\"+t,method:\"get\"})}function l(t,e){return Object(i.a)({url:\"api/users/updateEmail/\"+t,method:\"post\",data:e})}}}]);","extractedComments":[]}